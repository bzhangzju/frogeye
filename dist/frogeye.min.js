!function(){function t(e,i){this._element=e,this._options=n.extend(!0,{},i),this._initEvents(),this._config=n.extend(!0,{},t.defaultConfig,this._options.config||{}),this._handlers={},this._initData(),this._handleTouchStart=n.bind(this._handleTouchStart,this),this._handleTouchMove=n.bind(this._handleTouchMove,this),this._handleTouchEnd=n.bind(this._handleTouchEnd,this),e.addEventListener(s.TOUCH_START,this._handleTouchStart,!1),e.addEventListener(s.TOUCH_MOVE,this._handleTouchMove,!1),e.addEventListener(s.TOUCH_END,this._handleTouchEnd,!1)}var e=window,i="0.0.1",n={isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},extend:function(t,e){var i,s=!1,h=Array.prototype.slice.call(arguments);return"boolean"==typeof t&&(s=t,t=e,h.shift()),h.shift(),n.each(h,function(e){n.each(e,function(e,h){s&&((i=n.isArray(e))||n.isObject(e))?(t[h]=n.isArray(t[h])&&i||n.isObject(t[h])&&!i?t[h]:i?[]:{},n.extend(!0,t[h],e)):t[h]=e})}),t},each:function(t,e){var i,s;if(n.isArray(t))for(i=0;i<t.length&&e.call(t[i],t[i],i,t)!==!1;i++);else if(n.isObject(t))for(s in t)t.hasOwnProperty(s)&&e.call(t[s],t[s],s,t)},bind:function(t,e){return function(){t.apply(e,arguments)}},_getSwipeDirection:function(t,e){var i;return i=Math.abs(t)>=Math.abs(e)?t>0?"right":"left":e>0?"bottom":"top"},getPinchZoom:function(t,e,i){return i>0?Math.sqrt((t*t+e*e)/i):null},getRotateAngle:function(t,e,i,n,s){var h,a,r=Math.sqrt((t*t+e*e)*s),o=t*i+e*n,_=null;return 0>=r?_:(a=o/r,a=-1>a?-1:a>1?1:a,_=Math.acos(a),h=i*e-n*t,0>h&&(_=-_),180*_/Math.PI)}},s={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend"},h={TAP:"tap",PRESS:"press",SINGLE_TAP:"singletap",DOUBLE_TAP:"doubletap",PAN_START:"panstart",PAN_MOVE:"panmove",PAN_END:"panend",SWIPE:"swipe",PINCH:"pinch",ROTATE:"rotate"};t.version=i,t.defaultEvents=[h.TAP,h.PRESS,h.SINGLE_TAP,h.DOUBLE_TAP,h.PAN_START,h.PAN_MOVE,h.PAN_END,h.SWIPE],t.defaultConfig={tap:{distance:2,time:250},press:{time:251},doubleTap:{interval:300,distance:10},swipe:{distance:10,velocity:.3}},t.prototype={constructor:t,_initEvents:function(){var e=this._options.events,i={};e=void 0===e?n.extend(!0,[],t.defaultEvents):e,n.each(e,function(t){i[t]=!0}),this._options.events=i},_initData:function(){this._currentTap=null,this._tapped=!1,this._pressed=!1,this._pressTimer=null,this._singleTapped=!1,this._singleTapTimer=null,this._prevTap=null,this._doubleTapped=!1,this._currentPinch=null,this._currentRotate=null},destroy:function(){var t,e=this._element,i=this._handlers;e.removeEventListener(s.TOUCH_START,this._handleTouchStart,!1),e.removeEventListener(s.TOUCH_MOVE,this._handleTouchMove,!1),e.removeEventListener(s.TOUCH_END,this._handleTouchEnd,!1);for(t in i)i.hasOwnProperty(t)&&(i[t]=null,delete i[t])},_isInRange:function(t,e,i,n,s,h){var a,r;return a=n?Math.abs(t-n.x)<=s&&Math.abs(e-n.y)<=s:!1,a&&void 0!==i&&(r=i-n.time,a=r>=0&&h>=r),a},_isTap:function(t,e,i){var n=this._config.tap;return this._isInRange(t,e,i,this._currentTap,n.distance,n.time)},_isDoubleTap:function(t,e,i){var n=this._config.doubleTap;return this._isInRange(t,e,i,this._prevTap,n.distance,n.interval)},_isSwipe:function(t,e,i){var s,h,a=this._config.swipe,r=this._currentTap,o=t-r.x,_=e-r.y;return h=r?Math.abs(o)>=a.distance||Math.abs(_)>=a.distance:!1,h&&(s=i-r.time,h=s>0&&o*o+_*_>=s*s*a.velocity*a.velocity),h?n._getSwipeDirection(o,_):!1},_handleTouchStart:function(t){var i,s,a,r,o,_,p=t.touches;p.length&&(i=p[0].pageX,s=p[0].pageY,a=Date.now(),p.length>1&&(r=p[1].pageX-i,o=p[1].pageY-s,_=r*r+o*o,this._currentPinch={rs:_},this._currentRotate={x:r,y:o,rs:_}),this._tapped=!0,this._doubleTapped=!1,this._prevTap&&(this._doubleTapped=this._isDoubleTap(i,s,a)),this._currentTap={x:i,y:s,time:a},this._options.events[h.PRESS]&&(this._pressTimer=e.setTimeout(n.bind(this._detectPress,this),this._config.press.time)),this._emit(h.PAN_START,t))},_handleTouchMove:function(t){var e,i,n=t.touches;n.length&&(n.length>1&&(e=n[1].pageX-n[0].pageX,i=n[1].pageY-n[0].pageY,this._detectPinch(e,i,t),this._detectRotate(e,i)),this._tapped=this._tapped&&this._isTap(n[0].pageX,n[0].pageY),this._emit(h.PAN_MOVE,t))},_handleTouchEnd:function(t){var e,i,n=t.changedTouches,s=Date.now();n.length&&(e=n[0].pageX,i=n[0].pageY,this._detectTap(e,i,s),this._detectDoubleTap()||this._detectSingleTap(s,t),this._detectSwipe(e,i,s,t),this._emit(h.PAN_END,t),this._tapped=!1,this._doubleTapped=!1,this._currentPinch=null)},_detectTap:function(t,i,n){this._tapped=this._tapped&&this._isTap(t,i,n),this._tapped&&(this._emit(h.TAP,event),this._pressed=!1,this._pressTimer&&(e.clearTimeout(this._pressTimer),this._pressTimer=null))},_detectPress:function(){this._pressed=this._tapped,this._pressed&&(this._emit(h.PRESS),this._pressed=!1,this._tapped=!1,this._pressTimer=null)},_detectDoubleTap:function(){return this._prevTap&&this._tapped&&this._doubleTapped?(this._emit(h.DOUBLE_TAP),this._prevTap=null,this._singleTapTimer&&(e.clearTimeout(this._singleTapTimer),this._singleTapTimer=null),!0):(this._prevTap=this._tapped?n.extend({},this._currentTap):null,!1)},_detectSingleTap:function(t,i){var n,s=this;this._options.events[h.SINGLE_TAP]&&(this._tapped&&(n=this._config.doubleTap.interval+1-(t-this._currentTap.time)),this._singleTapped=this._tapped&&n>=0,this._singleTapped&&(this._singleTapTimer=e.setTimeout(function(){s._emit(h.SINGLE_TAP,i),s._singleTapTimer=null},n)))},_detectSwipe:function(t,e,i,n){var s;this._options.events[h.SWIPE]&&(s=this._isSwipe(t,e,i),s!==!1&&this._emit(h.SWIPE,n,{direction:s}))},_detectPinch:function(t,e,i){var s,a;this._options.events[h.PINCH]&&(s=this._currentPinch?this._currentPinch.rs:0,s>0&&(a=n.getPinchZoom(t,e,s),this._emit(h.PINCH,i,{zoom:a})))},_detectRotate:function(t,e,i){var s,a=this._currentRotate;this._options.events[h.ROTATE]&&a&&(s=n.getRotateAngle(t,e,a.x,a.y,a.rs),this._emit(h.ROTATE,i,{angle:s}))},_emit:function(t,e,i){var s,h=this._handlers[t],a=this._options.onemit;this._options.events[t]&&(s={type:t,srcEvent:e},i&&"object"==typeof i&&n.extend(s,i),h&&n.each(h,function(t){t(s)}),a&&a.call(this._element,s))},on:function(t,e){var i=this._handlers[t];return i||(i=this._handlers[t]=[]),i.push(e),this},off:function(t,e){var i,n=this._handlers[t],s=n?n.length:0;if(!s)return this;if(void 0===e)return this._handlers[t]=[],this;for(i=0;s>i;)n[i]===e?(n.splice(i,1),s--):i++;return this}},"object"==typeof module&&"object"==typeof exports?module.exports=t:void 0===window.Frogeye&&(window.Frogeye=t)}();